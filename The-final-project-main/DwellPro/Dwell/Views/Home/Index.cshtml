@using App.Domain.Core.Home.Entities.Categories
<div class="container pb-2">
    <div class="intro-section mb-2">
        <div class="row">
            <div class="intro-slide-wrapper col-lg-9">
                <div class="swiper-container swiper-theme animation-slider pg-inner pg-xxl-hide pg-show pg-white nav-xxl-show nav-hide" data-swiper-options="{
                'spaceBetween': 0,
                'slidesPerView': 1
                }">

                    <div class="swiper-wrapper gutter-no row cols-1">
                        @foreach (var homeService in Model.RandomHomeServices)
                        {
                            <div class="swiper-slide banner banner-fixed intro-slide intro-slide1 br-sm text-center"
                            style="background-image: url(@homeService.ImageUrl); background-color: #5B98B7;">
                                <div class="banner-content y-50">
                                    <h3 class="banner-title text-capitalize text-white font-secondary font-weight-normal ls-0 slide-animate"
                                    data-animation-options="{'name': 'fadeInLeftShorter', 'duration': '.5s', 'delay': '.2s'}">
                                        @homeService.Name
                                    </h3>
                                    <h4 class="banner-subtitle text-uppercase text-white font-weight-normal ls-0 slide-animate"
                                    data-animation-options="{'name': 'fadeInRightShorter', 'duration': '.5s', 'delay': '.4s'}">
                                        @homeService.Description
                                    </h4>
                                    <span class="font-weight-bolder text-uppercase text-white slide-animate d-block ls-normal"
                                    data-animation-options="{'name': 'fadeInRightShorter', 'duration': '.5s', 'delay': '.4s'}">
                                        نمایش مد 1401
                                    </span>
                                    @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
                                    {
                                        <a href="@Url.Action("CreateOrder", "Order", new { homeServiceId = homeService.Id })"
                                        class="btn btn-white btn-outline btn-rounded btn-icon-right br-xs slide-animate"
                                        data-animation-options="{'name': 'fadeInRightShorter', 'duration': '.5s', 'delay': '.6s'}">
                                            ثبت سفارش<i class="w-icon-long-arrow-left"></i>
                                        </a>
                                    }
                                </div>
                            </div>
                        }
                    </div>

                    <div class="swiper-pagination"></div>
                    <button class="swiper-button-next"></button>
                    <button class="swiper-button-prev"></button>
                </div>
            </div>
            <div class="intro-banner-wrapper col-lg-3 mt-4">
                @if (Model.LatestHomeServices != null && Model.LatestHomeServices.Count >= 2)
                {
                    @foreach (var homeService in Model.LatestHomeServices)
                    {
                        <div class="banner banner-fixed intro-banner col-lg-12 col-sm-6 br-sm mb-4">
                            <figure>
                                <img src="@homeService.ImageUrl" alt="@homeService.Name" width="680" height="180" style="background-color: #E4E7EC;" />
                            </figure>
                            <div class="banner-content">
                                <h4 class="banner-subtitle text-capitalize text-default font-secondary font-weight-normal">سرویس جدید</h4>
                                <h3 class="banner-title text-dark text-uppercase ls-25">@homeService.Name</h3>
                                @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
                                {

                                    <a href="@Url.Action("CreateOrder", "Order", new { homeServiceId = homeService.Id })" class="btn btn-dark btn-link btn-underline btn-icon-right">
                                        مشاهده سرویس <i class="w-icon-long-arrow-left"></i>
                                    </a>

                                }
                            </div>
                        </div>
                    }
                }
                else
                {
                    <p>هیچ سرویس جدیدی موجود نیست.</p>
                }
            </div>

        </div>
    </div>
    <!-- End of Intro-section -->

    <div class="swiper-container swiper-theme icon-box-wrapper br-sm bg-white" data-swiper-options="{
                    'loop': true,
                    'spaceBetween': 10,
                    'autoplay': false,
                    'autoplayTimeout': 4000,
                    'slidesPerView': 1,
                    'breakpoints': {
                        '576': {
                            'slidesPerView': 2
                        },
                        '768': {
                            'slidesPerView': 2
                        },
                        '992': {
                            'slidesPerView': 3
                        },
                        '1200': {
                            'slidesPerView': 4
                        }
                    }
                    }">
        <div class="swiper-wrapper row cols-md-4 cols-sm-3 cols-1">
            <div class="swiper-slide icon-box icon-box-side text-dark">
                <span class="icon-box-icon icon-shipping">
                    <i class="w-icon-truck"></i>
                </span>
                <div class="icon-box-content">
                    <h4 class="icon-box-title font-weight-bolder">ارسال رایگان و مرجوعی</h4>
                    <p class="text-default">برای تمام سفارشات بیش از 99 دلار</p>
                </div>
            </div>
            <div class="swiper-slide icon-box icon-box-side text-dark">
                <span class="icon-box-icon icon-payment">
                    <i class="w-icon-bag"></i>
                </span>
                <div class="icon-box-content">
                    <h4 class="icon-box-title font-weight-bolder">پرداخت امن</h4>
                    <p class="text-default">ما تضمین می کنیم</p>
                </div>
            </div>
            <div class="swiper-slide icon-box icon-box-side text-dark icon-box-money">
                <span class="icon-box-icon icon-money">
                    <i class="w-icon-money"></i>
                </span>
                <div class="icon-box-content">
                    <h4 class="icon-box-title font-weight-bolder">تضمین بازگشت پول</h4>
                    <p class="text-default">پس از 30 روز بازگشت</p>
                </div>
            </div>
            <div class="swiper-slide icon-box icon-box-side text-dark icon-box-chat">
                <span class="icon-box-icon icon-chat">
                    <i class="w-icon-chat"></i>
                </span>
                <div class="icon-box-content">
                    <h4 class="icon-box-title font-weight-bolder">پشتیبانی مشتری</h4>
                    <p class="text-default">24/7 با ما تماس بگیرید یا ایمیل بزنید</p>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Icon Box Wrapper -->

    <div class="swiper-container swiper-theme icon-category-wrapper shadow-swiper appear-animate mb-10 pb-2"
         data-swiper-options="{
                    'spaceBetween': 20,
                    'slidesPerView': 2,
                    'breakpoints': {
                        '576': {
                            'slidesPerView': 3
                        },
                        '768': {
                            'slidesPerView': 4
                        },
                        '992': {
                            'slidesPerView': 5
                        },
                        '1200': {
                            'slidesPerView': 8
                        }
                    }
                    }">
        @model DwellMVC.Models.HomePageViewModel

        @{
            string[] backgroundColors = { "green", "brown", "orange", "blue", "yellow", "red", "darkblue", "violet" };
            int index = 0;
        }

        @if (Model.Categories != null && Model.Categories.Any())
        {
            <div class="swiper-wrapper row cols-xl-8 cols-lg-7 cols-md-6 cols-sm-4 cols-xs-3 cols-2">
                @foreach (var category in Model.Categories)
                {
                    <div class="swiper-slide category category-icon">
                        <a href="@Url.Action("GetSubCategoriesByCategoryId", "Category", new { categoryId = category.Id })">
                            <figure class="category-media" style="background-color: @backgroundColors[index];">
                                <img src="@category.ImageUrl" alt="@category.Name" />
                            </figure>
                        </a>
                        <div class="category-content">
                            <h4 class="category-name">
                                <a href="@Url.Action("GetSubCategoriesByCategoryId", "Category", new { categoryId = category.Id })">@category.Name</a>
                            </h4>
                        </div>
                    </div>
                    index = (index + 1) % backgroundColors.Length;

                }
            </div>
        }
        else
        {
            <p>No categories available.</p>
        }


        <div class="swiper-pagination"></div>
    </div>

    <div class="swiper-pagination"></div>
    <div class="swiper-container swiper-theme product-deals-wrapper appear-animate mb-6"
         data-swiper-options="{
            'spaceBetween': 20,
            'slidesPerView': 2,
            'breakpoints': {
                '576': {
                    'slidesPerView': 3
                },
                '768': {
                    'slidesPerView': 4
                },
                '992': {
                    'slidesPerView': 5
                }
            }
            }">
        <h3>Top Home Services</h3>
        @if (Model.TopHomeServices != null && Model.TopHomeServices.Any())
        {
            <div class="swiper-wrapper row cols-lg-5 cols-md-4 cols-sm-3 cols-2">
                @foreach (var homeService in Model.TopHomeServices)
                {
                    <div class="swiper-slide product-wrap">
                        <div class="product text-center">
                            <figure class="product-media">
                                @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
                                {
                                    <a href="@Url.Action("CreateOrder", "Order", new { homeServiceId = homeService.Id })">
                                        <img src="@homeService.ImageUrl" alt="@homeService.Name" width="300" height="337">
                                        <img src="@homeService.ImageUrl" alt="@homeService.Name" width="300" height="337">
                                    </a>
                                }
                                else
                                {
                                    <a href="@Url.Action("Login", "Authentication")">
                                        <img src="@homeService.ImageUrl" alt="@homeService.Name" width="300" height="337">
                                        <img src="@homeService.ImageUrl" alt="@homeService.Name" width="300" height="337">
                                    </a>
                                }
                                <div class="product-action-horizontal">
                                    @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
                                    {
                                        <a href="#" class="btn-product-icon btn-cart w-icon-cart" title="Add to Cart"></a>
                                        <a href="#" class="btn-product-icon btn-wishlist w-icon-heart" title="Wishlist"></a>
                                        <a href="#" class="btn-product-icon btn-compare w-icon-compare" title="Compare"></a>
                                        <a href="#" class="btn-product-icon btn-quickview w-icon-search" title="Quick View"></a>
                                    }
                                    else
                                    {
                                        <a href="@Url.Action("Login", "Authentication")" class="btn-product-icon btn-cart w-icon-cart" title="Add to Cart">Login to Add</a>
                                        <a href="@Url.Action("Login", "Authentication")" class="btn-product-icon btn-wishlist w-icon-heart" title="Wishlist">Login to Wishlist</a>
                                        <a href="@Url.Action("Login", "Authentication")" class="btn-product-icon btn-compare w-icon-compare" title="Compare">Login to Compare</a>
                                        <a href="@Url.Action("Login", "Authentication")" class="btn-product-icon btn-quickview w-icon-search" title="Quick View">Login to View</a>
                                    }
                                </div>
                            </figure>
                            <div class="product-details">
                                <h4 class="product-name">
                                    @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
                                    {
                                        <a href="@Url.Action("CreateOrder", "Order", new { homeServiceId = homeService.Id })">@homeService.Name</a>
                                    }
                                    else
                                    {
                                        <span>@homeService.Name</span> 
                                    }
                                </h4>
                                <div class="ratings-container">
                                    <div class="ratings-full">
                                        <span class="ratings" style="width: @(homeService.ViewCount / 100)%"></span>
                                        <span class="tooltiptext tooltip-top"></span>
                                    </div>
                                    <a href="@Url.Action("CreateOrder", "Order", new { homeServiceId = homeService.Id })" class="rating-reviews">(@homeService.ViewCount views)</a>
                                </div>
                                <div class="product-price">
                                    <ins class="new-price">@homeService.BasePrice.ToString("C")</ins>
                                </div>
                            </div>

                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <p>No top home services available.</p>
        }
    </div>

</div>